# Repository Configuration Example
# Copy this file to config.yaml and customize the values for your deployment.

# Repository Information
repository:
  owner: "your-github-username"  # Update with your GitHub username/organization
  name: "your-repo-name"         # Update with your repository name

# Domain Configuration
domain:
  primary: "example.com"         # Primary domain for services (required)
  subdomain_prefix: "k8s"        # Prefix for service subdomains (optional)
  # Services will be accessible at:
  # - auth.{primary} (Keycloak)
  # - chat.{primary} (Mattermost)
  # - cloud.{primary} (Nextcloud)
  # - mail.{primary} (Mailu)
  # - postal.{primary} (Postal)

# Cluster Configuration
cluster:
  name: "cumulus"               # Kubernetes cluster name
  region: "nyc3"               # DigitalOcean region (nyc1, nyc3, ams3, sfo3, sgp1, lon1, fra1, tor1, blr1, syd1)
  node_size: "s-1vcpu-2gb"     # Node size (s-1vcpu-2gb, s-2vcpu-2gb, s-2vcpu-4gb, s-4vcpu-8gb, etc.)
  min_nodes: 2                 # Minimum nodes in pool
  max_nodes: 3                 # Maximum nodes in pool
  node_count: 2                # Initial node count
  auto_scale: true             # Enable autoscaling

# Project Configuration
project:
  name: "My Kubernetes Project" # Descriptive project name for tagging

# Service Configuration
services:
  # Authentication service (Keycloak)
  keycloak:
    enabled: true
    admin_user: "admin"
    realm_name: "myrealm"
  
  # Chat service (Mattermost)
  mattermost:
    enabled: true
    site_name: "My Team Chat"
  
  # Cloud storage (Nextcloud)
  nextcloud:
    enabled: true
    admin_user: "admin"
  
  # Email service (Mailu)
  mailu:
    enabled: true
    admin_user: "admin"
    # AWS SES configuration for outgoing mail relay
    ses:
      enabled: true
      region: "us-east-1"  # AWS region for SES service
  
  # Mail server (Postal)
  postal:
    enabled: true
    admin_user: "admin"

# Monitoring and Observability Stack
monitoring:
  # Prometheus metrics collection
  prometheus:
    enabled: true
    retention: "30d"
  
  # Grafana dashboards and visualization
  grafana:
    enabled: true
    admin_user: "admin"
  
  # Jaeger distributed tracing
  jaeger:
    enabled: true
    storage: "memory"  # memory or elasticsearch
  
  # Loki centralized logging
  loki:
    enabled: true
    retention: "168h"  # 7 days
  
  # Sentry error tracking
  sentry:
    enabled: true
    organization: "default"
  
  # OpenTelemetry auto-instrumentation
  opentelemetry:
    enabled: true
    sampling_rate: "0.25"  # 25% sampling

# Platform Capabilities
platform:
  # Knative serverless applications
  knative:
    enabled: true
    kourier_ingress: true
  
  # Velero backup and disaster recovery
  velero:
    enabled: true

# Advanced Configuration (usually don't need to change)
advanced:
  flux:
    target_branch: "main"
    target_path: "./flux/clusters/cumulus"
  terraform:
    backend_region: "nyc3"
  kubernetes:
    version: null  # Use latest available version