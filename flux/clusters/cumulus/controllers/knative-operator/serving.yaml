apiVersion: operator.knative.dev/v1beta1
kind: KnativeServing
metadata:
  name: knative-serving
  namespace: knative-serving
spec:
  version: "1.15.2"
  ingress:
    istio:
      enabled: false
    kourier:
      enabled: true
  config:
    network:
      ingress-class: "kourier.ingress.networking.knative.dev"
    domain:
      "{{ (datasource "config").domain.primary }}": ""
    deployment:
      queueSidecarImage: gcr.io/knative-releases/knative.dev/serving/cmd/queue:v1.15.2
    logging:
      loglevel.controller: info
      loglevel.autoscaler: info
      loglevel.queueproxy: info
      loglevel.webhook: info
      loglevel.activator: info
  workloads:
    - name: controller
      replicas: 1
      resources:
        - container: controller
          requests:
            cpu: 100m
            memory: 100Mi
          limits:
            cpu: 1000m
            memory: 1000Mi
    - name: webhook
      replicas: 1
      resources:
        - container: webhook
          requests:
            cpu: 20m
            memory: 20Mi
          limits:
            cpu: 200m
            memory: 200Mi
    - name: activator
      replicas: 1
      resources:
        - container: activator
          requests:
            cpu: 300m
            memory: 60Mi
          limits:
            cpu: 1000m
            memory: 600Mi
    - name: autoscaler
      replicas: 1
      resources:
        - container: autoscaler
          requests:
            cpu: 30m
            memory: 40Mi
          limits:
            cpu: 300m
            memory: 400Mi