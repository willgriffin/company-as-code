# Secret templates for Kong Gateway (PostgreSQL and backup credentials)
# This file is processed by GitHub Actions to generate encrypted secrets
# Required GitHub Secrets:
# - KONG_POSTGRES_PASSWORD
# - BACKUP_SPACES_ACCESS_KEY
# - BACKUP_SPACES_SECRET_KEY

---
# PostgreSQL credentials for CloudNativePG cluster
apiVersion: v1
kind: Secret
metadata:
  name: kong-postgres-credentials
  namespace: kong-system
type: kubernetes.io/basic-auth
stringData:
  username: kong
  password: "${KONG_POSTGRES_PASSWORD}"

---
# Backup credentials for PostgreSQL (DigitalOcean Spaces)
apiVersion: v1
kind: Secret
metadata:
  name: kong-postgres-backup-credentials
  namespace: kong-system
type: Opaque
stringData:
  ACCESS_KEY_ID: "${BACKUP_SPACES_ACCESS_KEY}"
  SECRET_ACCESS_KEY: "${BACKUP_SPACES_SECRET_KEY}"

---
# Redis authentication secret
apiVersion: v1
kind: Secret
metadata:
  name: kong-redis-secret
  namespace: kong-system
type: Opaque
stringData:
  password: "${KONG_REDIS_PASSWORD}"

---
# Kong OIDC client secret
apiVersion: v1
kind: Secret
metadata:
  name: kong-oidc-secret
  namespace: kong-system
type: Opaque
stringData:
  kong-oidc-secret: "${KONG_OIDC_SECRET}"