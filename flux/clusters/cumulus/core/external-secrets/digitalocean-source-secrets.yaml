# Source secrets in central namespace that will be referenced by ExternalSecrets
# These are the actual secrets containing DigitalOcean credentials

---
# DigitalOcean API token for DNS and infrastructure
apiVersion: v1
kind: Secret
metadata:
  name: digitalocean-token
  namespace: digitalocean-secrets
  labels:
    app.kubernetes.io/name: digitalocean-secrets
    app.kubernetes.io/component: api-token
type: Opaque
stringData:
  # This will be set via environment variable in GitHub Actions
  token: "{{ .Env.DIGITALOCEAN_TOKEN }}"

---
# DigitalOcean Spaces credentials for backups and object storage
apiVersion: v1
kind: Secret
metadata:
  name: digitalocean-spaces
  namespace: digitalocean-secrets
  labels:
    app.kubernetes.io/name: digitalocean-secrets
    app.kubernetes.io/component: spaces-credentials
type: Opaque
stringData:
  # AWS-compatible credentials for DigitalOcean Spaces
  AWS_ACCESS_KEY_ID: "{{ .Env.DO_SPACES_ACCESS_KEY }}"
  AWS_SECRET_ACCESS_KEY: "{{ .Env.DO_SPACES_SECRET_KEY }}"
  # Alternative naming for different tools
  access_key: "{{ .Env.DO_SPACES_ACCESS_KEY }}"
  secret_key: "{{ .Env.DO_SPACES_SECRET_KEY }}"

---
# Sentry authentication token for error tracking
apiVersion: v1
kind: Secret
metadata:
  name: sentry-auth
  namespace: digitalocean-secrets
  labels:
    app.kubernetes.io/name: digitalocean-secrets
    app.kubernetes.io/component: sentry-auth
type: Opaque
stringData:
  token: "{{ .Env.SENTRY_AUTH_TOKEN }}"
  dsn: "{{ .Env.SENTRY_DSN }}"

---
# SMTP credentials for email notifications
apiVersion: v1
kind: Secret
metadata:
  name: smtp-credentials
  namespace: digitalocean-secrets
  labels:
    app.kubernetes.io/name: digitalocean-secrets
    app.kubernetes.io/component: smtp
type: Opaque
stringData:
  host: "{{ .Env.SMTP_HOST }}"
  port: "{{ .Env.SMTP_PORT }}"
  username: "{{ .Env.SMTP_USERNAME }}"
  password: "{{ .Env.SMTP_PASSWORD }}"
  from: "{{ .Env.SMTP_FROM }}"