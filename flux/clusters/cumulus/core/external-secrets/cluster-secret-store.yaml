# ClusterSecretStore for accessing DigitalOcean secrets across all namespaces
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: digitalocean-secrets
  labels:
    app.kubernetes.io/name: external-secrets
    app.kubernetes.io/component: cluster-secret-store
spec:
  provider:
    kubernetes:
      # Central secrets namespace
      remoteNamespace: digitalocean-secrets
      server:
        url: "https://kubernetes.default.svc"
        caProvider:
          type: ConfigMap
          name: kube-root-ca.crt
          key: ca.crt
          namespace: kube-system
      auth:
        serviceAccount:
          name: external-secrets-digitalocean
          namespace: external-secrets-system

---
# SecretStore for core infrastructure components
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: digitalocean-core
  namespace: external-dns
  labels:
    app.kubernetes.io/name: external-secrets
    app.kubernetes.io/component: secret-store
spec:
  provider:
    kubernetes:
      remoteNamespace: digitalocean-secrets
      server:
        url: "https://kubernetes.default.svc"
        caProvider:
          type: ConfigMap
          name: kube-root-ca.crt
          key: ca.crt
          namespace: kube-system
      auth:
        serviceAccount:
          name: external-secrets-digitalocean
          namespace: external-secrets-system

---
# SecretStore for monitoring components  
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: digitalocean-monitoring
  namespace: monitoring
  labels:
    app.kubernetes.io/name: external-secrets
    app.kubernetes.io/component: secret-store
spec:
  provider:
    kubernetes:
      remoteNamespace: digitalocean-secrets
      server:
        url: "https://kubernetes.default.svc"
        caProvider:
          type: ConfigMap
          name: kube-root-ca.crt
          key: ca.crt
          namespace: kube-system
      auth:
        serviceAccount:
          name: external-secrets-digitalocean
          namespace: external-secrets-system