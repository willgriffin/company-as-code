apiVersion: k8s.keycloak.org/v2alpha1
kind: KeycloakClient
metadata:
  name: jaeger-client
  namespace: jaeger
spec:
  realmSelector:
    matchLabels:
      realm: happyvertical
  client:
    clientId: jaeger
    name: Jaeger
    description: Distributed tracing
    protocol: openid-connect
    clientAuthenticatorType: client-secret
    publicClient: false
    standardFlowEnabled: true
    directAccessGrantsEnabled: false
    implicitFlowEnabled: false
    serviceAccountsEnabled: false
    redirectUris:
      - https://tracing.{{ (datasource "config").domain.primary }}/oauth2/callback
    webOrigins:
      - https://tracing.{{ (datasource "config").domain.primary }}
    defaultClientScopes:
      - openid
      - email
      - profile
    attributes:
      backchannel.logout.session.required: "true"
      backchannel.logout.revoke.offline.tokens: "false"
  secretName: jaeger-keycloak-client-secret