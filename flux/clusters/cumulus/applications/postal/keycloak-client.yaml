apiVersion: k8s.keycloak.org/v2alpha1
kind: KeycloakClient
metadata:
  name: postal
  namespace: postal
  labels:
    app: keycloak
spec:
  realmRef:
    name: keycloak-realm
    namespace: keycloak
  client:
    clientId: postal
    name: Postal Mail Server
    description: Postal mail server authentication
    enabled: true
    clientAuthenticatorType: client-secret
    secret: postal-oauth-secret
    standardFlowEnabled: true
    implicitFlowEnabled: false
    directAccessGrantsEnabled: false
    serviceAccountsEnabled: false
    publicClient: false
    protocol: openid-connect
    attributes:
      "saml.assertion.signature": "false"
      "saml.force.post.binding": "false"
      "saml.multivalued.roles": "false"
      "saml.encrypt": "false"
      "saml.server.signature": "false"
      "saml.server.signature.keyinfo.ext": "false"
      "exclude.session.state.from.auth.response": "false"
      "saml_force_name_id_format": "false"
      "saml.client.signature": "false"
      "tls.client.certificate.bound.access.tokens": "false"
      "saml.authnstatement": "false"
      "display.on.consent.screen": "false"
      "saml.onetimeuse.condition": "false"
    redirectUris:
      - "https://postal.{{ (datasource "config").domain }}/oauth2/callback"
    webOrigins:
      - "https://postal.{{ (datasource "config").domain }}"
    defaultClientScopes:
      - web-origins
      - profile
      - roles
      - email
    optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt